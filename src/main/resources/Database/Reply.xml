<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Reply">

	<!-- 댓글리스트 -->
	<select id="replyList" parameterType="Reply" resultType="Reply">
		select 
			reply.b_num, reply.br_num, reply.br_content, 
			(case when to_char( reply.br_regdate, 'yyyy.mm.dd' ) = to_char( sysdate, 'yyyy.mm.dd' ) then to_char( reply.br_regdate, 'HH24:mi:ss') else to_char( reply.br_regdate, 'yyyy.mm.dd') end) as br_regdate, 
			reply.br_group, reply.br_indent, reply.br_step, member.m_num, member.m_nickname 
		from 
			reply join board on reply.b_num = board.b_num join member on reply.m_num = member.m_num
		where 
			board.b_num=#{b_num} order by  reply.br_group, reply.br_num
	</select>
	
</mapper>